# 计算机网络

主机之间的通信方式：

- 客户-服务器(C/S):客户是服务的请求方，服务器是服务的提供方。（B/S方式这是C/S方式的一种特例)
- 对等连接方式(P2P)：不区分客户和服务器

交换模式：

- 电路交换：在通话的全部时间内，通话的二个用户始终占用端到端的通信资源
- 分组交换：每个分组都有首部和尾部，包含了源地址和目的地址等控制信息，在同一个传输线路上同时传输多个分组互相不会影响，因此在同一条传输线路上允许同时传输多个分组，也就是说分组交换不需要占用传输线路。  
- 报文交换：整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点。

时延

总时延=传输时延+传播时延+处理时延+排队时延

![image-20200519124128740](C:\Users\Ally\AppData\Roaming\Typora\typora-user-images\image-20200519124128740.png)

1. 传输时延(发送时延)：主机或路由器传输数据帧所需要的时间
2. 传播时延：电磁波在信道中传播所需要花费的时间
3. 处理时延：主机或路由器收到分组时进行处理所需要的时间，例如分析首部、从分组中提取数据、进行差错检验或查找适当的路由等。
4. 排队时延： 分组在路由器的输入队列和输出队列中排队等待的时间，取决于网络当前的通信量  

![image-20200519124939849](C:\Users\Ally\AppData\Roaming\Typora\typora-user-images\image-20200519124939849.png)

五层协议：

- 应用层：为特定应用程序提供数据传输服务，例如 HTTP、DNS 等。数据单位为报文  。
- 运输层：提供的是进程间的通用数据传输服务。由于应用层协议很多，定义通用的运输层协议就可以支持不断增多的应用层协议。运输层包括两种协议：传输控制协议 TCP，提供面向连接、可靠的数据传输服务，数据单位为报文段；用户数据报协议 UDP，提供无连接、尽最大努力的数据传输服务，数据单位为用户数据报。TCP 主要提供完整性服务，UDP 主要提供及时性服务。 
- 网络层：为主机间提供数据传输服务，而运输层协议是为主机中的进程提供服务，网络层把运输层传递下来的报文段或者用户数据报封装成分组。
- 数据链路层：链路层协议就是为同一链路的主机提供服务。数据链路层把网络层传下来的分组封装成帧。  
- 物理层：考虑的是怎样在传输媒体上传输数据比特流，而不是指具体的传输媒体。物理层的作用是尽可能屏蔽传输媒体和通信手段的差异，使数据链路层感觉不到这些差异。   

OSI：

- 表示层：数据压缩、加密以及数据描述。
- 会话层：建立及管理会话

TCP/IP：

网络接口层：包含数据链路层和物理层

#### 物理层

###### 通信方式：

- 单工通信：单向传输
- 半双工通信：双向交替传输
- 全双工通信：双向同时传输

###### 带通调制：

模拟信号是连续的信号，数字信号是离散的信号，带通调制把数字信号转换为模拟信号。

![image-20200519152753050](C:\Users\Ally\AppData\Roaming\Typora\typora-user-images\image-20200519152753050.png)

#### 数据链路层

###### 封装成帧

将网络层传下来的分组添加首部和尾部，用于标记帧的开始和结束。

![image-20200519153745926](C:\Users\Ally\AppData\Roaming\Typora\typora-user-images\image-20200519153745926.png)

###### 透明传输

帧使用首部和尾部进行定界，如果帧的数据部分含有和首部尾部相同的内容，那么帧的开始和结束位置就会被错误的判定。需要在数据部分出现首部尾部相同的内容前面插入转义字符。如果数据部分出现转义字符，那么就在转义字符前面再加个转义字符。在接收端进行处理之后可以还原出原始数据。这个过程透明传输的内容是转义字符，用户察觉不到转义字符的存在。

###### 差错检测

使用了循环冗余检验（CRC）来检查比特差错。  

###### 信道分类

1. 广播信道：一对多通信，一个节点发送的数据能够被广播信道上所有的节点接收到。所有的节点都在同一个广播信道上发送数据，因此需要有专门的控制方法进行协调，避免发生冲突(冲突也叫碰撞)。主要有两种控制方法进行协调，一个是使用信道复用技术，一是使用 CSMA/CD 协议。
2. 点对点信道：一对一通信，因为不会发送碰撞，因此也比较简单，使用PPP协议进行控制。

###### 信道复用技术

1. 频分复用：频分复用的所有主机在相同的时间占用不同的频率带宽资源。
2. 时分复用：时分复用的所有主机在不同的时间占用相同的频率带宽资源。  
3. 统计时分复用：是对时分复用的一种改进，不固定每个用户在时分复用帧中的位置，只要有数据就集中起来组成统计时分复用帧然后发送。
4. 波分复用：  由于光的频率很高，因此习惯上用波长而不是频率来表示所使用的光载波。  
5. 码分复用

###### CSMA/CD协议(载波侦听多路访问/冲突检测)

- 多点接入 ：说明这是总线型网络，许多主机以多点的方式连接到总线上。  
- 载波监听：每个主机都必须不停地监听信道。在发送前，如果监听到信道正在使用，必须等待。
- 碰撞检测：在发送中，如果监听到信道已有其它主机正在发送数据，就表示发生了碰撞。虽然每个主机在发送数据之前都已经监听到信道为空闲，但是由于电磁波的传播时延的存在，还是有可能会发生碰撞。  

###### PPP协议

互联网用户通常需要连接到某个 ISP 之后才能接入到互联网，PPP 协议是用户计算机和 ISP 进行通信时所使用的数据链路层协议。

![image-20200519164623700](C:\Users\Ally\AppData\Roaming\Typora\typora-user-images\image-20200519164623700.png)  

###### MAC地址

MAC 地址是链路层地址，长度为 6 字节（48 位），用于唯一标识网络适配器（网卡）。一台主机拥有多少个适配器就有多少个 MAC 地址。例如笔记本电脑普遍存在无线网络适配器和有线网络适配器，因此就有两个 MAC 地址。

###### 局域网

主要有以太网、令牌网、FFDI和ATM等局域网技术

![image-20200519164934388](C:\Users\Ally\AppData\Roaming\Typora\typora-user-images\image-20200519164934388.png)